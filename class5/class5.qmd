---
title: "gpkg וסימבולוגיה"
author: 'ד"ר עדו קליין'
date: 02/12/2024
format:
  revealjs:
    rtl: true
    css: "style.css"
    slide-number: true
    show-slide-number: all
editor: visual
---

```{ojs}
//| echo: false
now = new Date
```

## תזכורת לשיעור הקודם

-   דיברנו על מפות כלליות, מפות נושאיות

## בשיעור היום

-   נלמד איך טוענים פרויקט מgpkg

-   נלמד כיצד לייצג שכבות

## השלמת חובות - טעינת פרויקט מgpkg

קבצי GPKG הם קבצים בקוד פתוח, המאפשרים ניהול מלא של פרויקט מקובץ אחד, כולל שכבות, סגנונות, מפות ופרויקט.

בניגוד לשימוש בקבצי shp ותוספותיהם, אפשר לייצר קובץ gpkg עם מספר שכבות ופרויקטים.

## כיצד טוענים פרויקט?

{{< video load_proj.mp4 width="600" height="420" title="Why all world maps are wrong">}}

## תרגול GPKG

-   נוריד שכבות מהאינטרנט

    -   [שכבת קווי הרק"ל](https://data.gov.il/dataset/lrt_line)

    -   [שכבת תחנות הרק"ל](https://data.gov.il/dataset/lrt_stat)

-   נייצר קובץ GPKG

-   נשמור לתוכו את השכבות

-   נשמור בתוכו פרויקט

## יצירת קובץ GPKG - הדגמה

![](images/paste-1.png)

![](images/paste-2.png)

------------------------------------------------------------------------

על מנת לאתחל קובץ gpkg, נייצר קובץ ריק שכזה

![](images/paste-3.png)

------------------------------------------------------------------------

### שמירת השכבות אל תוך הGPKG

יש כמה דרכים, בשיעור ניגע בכמה, במצגת - את הדרך הקלה:

נייצר חיבור חדש אל הGPKG (בחירת קובץ)

![](images/paste-4.png)

------------------------------------------------------------------------

נגרור את השכבות אל תוך הGPKG

![](images/paste-5.png)

------------------------------------------------------------------------

### שמירת הפרויקט לתוך הGPKG

נשמור פרויקט לתוך הGPKG -

![](images/paste-6.png)

------------------------------------------------------------------------

ניתן שם לפרויקט. יש אפשרות לשמור מספר פרויקטים בתוך GPKG אחד.

![](images/paste-7.png)

## עבודה עם פאנל העיצוב - עברנו על כך בשיעור הקודם

שתי דרכי גישה אל פאנל העיצוב:

![](images/paste-27.png){width="551"}

------------------------------------------------------------------------

![](images/paste-28.png)

------------------------------------------------------------------------

בחלון נפרד

![](images/paste-29.png)

## סימול אחיד

התוכנה מאפשרת לנו לבצע סימולים אחידים עבור כל השכבה. במידה ואנחנו לא רוצים להיכנס לפרטים, ניתן לעשות קוסטימיזציה למאפיינים בסיסיים כמו גודל, צבע, שקיפות וזווית. ניתן גם לבחור סגנון קבוע מראש.

![](images/paste-30.png){width="551"}

## סימול מורכב יותר

במידה ולוחצים על simple marker, אפשר לשפר את השליטה בסימון הנקודה.

![](images/paste-31.png){width="551"}

------------------------------------------------------------------------

יש הרבה מאוד אפשרויות סגנון, ניתן להעלות סוגים שונים של מרקרים מתמונות וכו’. מדובר בעולם תוכן שלם, ולא ניגע בו בקורס זה, שכן הוא כולל הרבה מאוד למידה עצמית, והוא מאוד תלוי למה שרוצים להשיג.

## סימול לפי קטגוריות - חזרה על החומר הנלמד בשיעור הקודם

על מנת להדגים, נוריד את שכבת סוגי האוכלוסיה בירושלים מכאן:

<https://data.gov.il/dataset/taz_jer_pop_type>

נשנה את הבחירה בדרופדאון העליון לcategorized

![](images/paste-32.png){width="551"}

------------------------------------------------------------------------

## תזכורת!

כל שכבה היא טבלה. בכל טבלה יש עמודות שונות. נלמד בהמשך הקורס לעומק על הישויות ועל סינון ושליטה במידע. אבל בינתיים - חשוב להכיר את טבלת הישויות - attribute table. פאנל layers -\> כפתור ימני על השכבה הרצויה -\> attribute table

השליטה הבסיסית כאן היא:\
על בסיס איזה משתנה מחלקים לקטגוריות. qgis מציין אם המשתנה הוא מספרי או טקסטואלי, ובכך מסייע בבחירה ![](images/paste-8.png)

------------------------------------------------------------------------

שימו לב! תמיד יש ללחוץ על כפתור הclassify על מנת לחלק לרמות השונות

![](images/paste-9.png)

## סימול לפי משתנה רציף - אוטומטי

על מנת לתרגל את הנ"ל, נוריד את שכבת צפיפות מקומות עבודה ארצית:

<https://data.gov.il/dataset/2030>

דומה מאוד לסימון לפי משתנה קטגוריאלי, בשינוי משמעותי אחד - השליטה בחלוקה לרמות. ניתן לבצע אותה בצורה אוטומטית או ידנית:

בצורה אוטומטית, יש ללחוץ על תפריט mode (לאחר שבחרנו את המשתנה ולחצנו על classify), ולבחור את צורת החלוקה בין הנתונים.

![](images/paste-35.png)

## צורות חלוקה של מידע

1.  x-ונים - כמות שווה של דגימות בכל קבוצה (חציונים, רביעונים, חמישונים, עשירונים וכו’)

2.  מרווח שווה בין הערכים (נניח שסט הערכים בין 0 ל10, ואנו מחלקים בחמש, החלוקות יהיו במספרים הזוגיים)

3.  סקאלה לוגרתמית - חלוקה שווה בין החזקות הלוגרתמיות

4.  הפסקות טבעיות - מבוססות אלגורתם jenks (ממזער שונות בתוך הקבוצה, ממקסם שונות בין הקבוצות)

5.  הפסקות יפות - מבוססות עיגול ערכים

6.  חלוקה מבוססת מיקום הדגימה בהתחשב מהסטייה של הנתון מהממוצע

------------------------------------------------------------------------

כפתור הclasses מאפשר לנו לחלק את הדאטה לכמות הרמות הרצויה.

שימוש בhistogram מאפשר לנו לראות כיצד הדאטה מתפלג, ומסייע בהבנה של איך יהיה חכם לייצג אותו בצורה לא מרחבית. ניתן אף להוסיף רמות על ידי לחיצה על המקום בהיסטוגרמה בו רוצים להוסיף, או לשנות גבולות על ידי הזזת הקווים על ההיסטוגרמה. (לא לשכוח ללחוץ על load values בהתחלה)

![](images/paste-36.png){width="400"}

## סימול לפי משתנה רציף - ידני

ניתן גם לחלק לרמות שונות בצורה ידנית - בחירת המשתנה, הוספת רמות באמצעות לחיצה על כפתור הפלוס, בחירה הרמה הרצויה, ודאבל קליק על עמודת הvalues.\
שם יש לציין גבול תחתון ועליון לרמת הייצוג.\
במידה ויש כמה רמות, הגבולות בין הרמה לרמות האחרות ישתנו בהתאם לשינוי שמבצעים ברמה.\
יש לבחור צבעים לכל רמה על ידי דאבל קליק על עמודת symbol,וגם לשנות את התגית של הקבוצה על ידי דאבל קליק על השדה בעמודת legend.

## תרגיל 4

1.  הורידו את הGPKG מהאתר

2.  ייצגו את המבנים במפה לפי שנת הבנייה שלהם בסקאלה רציונלית וצלמו את המסך

3.  ייצגו את המבנים במפה לפי מספר הקומות שלהם בסקאלה אורדינלית וצלמו את המסך

4.  העלו את צילומי המסך למודל